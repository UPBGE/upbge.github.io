"use strict";if(void 0===Scorer)var Scorer={objNameMatch:11,objPartialMatch:6,objPrio:{0:15,1:5,2:-5},objPrioDefault:0,title:15,partialTitle:7,term:5,partialTerm:2};class SearchResultKind{static get index(){return"index"}static get object(){return"object"}static get text(){return"text"}static get title(){return"title"}}const _removeChildren=e=>{for(;e&&e.lastChild;)e.removeChild(e.lastChild)},_escapeRegExp=e=>e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&"),_displayItem=(e,t,r)=>{const n=DOCUMENTATION_OPTIONS.BUILDER,a=DOCUMENTATION_OPTIONS.FILE_SUFFIX,s=DOCUMENTATION_OPTIONS.LINK_SUFFIX,o=DOCUMENTATION_OPTIONS.SHOW_SEARCH_SUMMARY,c=document.documentElement.dataset.content_root,[i,h,l,u,d,m,S]=e;let p,f,_=document.createElement("li");if(_.classList.add(`kind-${S}`),"dirhtml"===n){let e=i+"/";e.match(/\/index\/$/)?e=e.substring(0,e.length-6):"index/"===e&&(e=""),p=c+e,f=p}else p=c+i+a,f=i+s;let x=_.appendChild(document.createElement("a"));x.href=f+l,x.dataset.score=d,x.innerHTML=h,u?(_.appendChild(document.createElement("span")).innerHTML=" ("+u+")",SPHINX_HIGHLIGHT_ENABLED&&r.forEach((e=>_highlightText(_,e,"highlighted")))):o&&fetch(p).then((e=>e.text())).then((e=>{e&&_.appendChild(Search.makeSearchSummary(e,t,l)),SPHINX_HIGHLIGHT_ENABLED&&r.forEach((e=>_highlightText(_,e,"highlighted")))})),Search.output.appendChild(_)},_finishSearch=e=>{Search.stopPulse(),Search.title.innerText=_("Search Results"),Search.status.innerText=e?Documentation.ngettext("Search finished, found one page matching the search query.","Search finished, found ${resultCount} pages matching the search query.",e).replace("${resultCount}",e):Documentation.gettext("Your search did not match any documents. Please make sure that all words are spelled correctly and that you've selected enough categories.")},_displayNextItem=(e,t,r,n)=>{e.length?(_displayItem(e.pop(),r,n),setTimeout((()=>_displayNextItem(e,t,r,n)),5)):_finishSearch(t)},_orderResultsByScoreThenName=(e,t)=>{const r=e[4],n=t[4];if(r===n){const r=e[1].toLowerCase(),n=t[1].toLowerCase();return r===n?0:r>n?-1:1}return r>n?1:-1};if(void 0===splitQuery)var splitQuery=e=>e.split(/[^\p{Letter}\p{Number}_\p{Emoji_Presentation}]+/gu).filter((e=>e));const Search={_index:null,_queued_query:null,_pulse_status:-1,htmlToText:(e,t)=>{const r=(new DOMParser).parseFromString(e,"text/html");for(const e of[".headerlink","script","style"])r.querySelectorAll(e).forEach((e=>{e.remove()}));if(t){const e=r.querySelector(`[role="main"] ${t}`);if(e)return e.textContent;console.warn(`Anchored content block not found. Sphinx search tries to obtain it via DOM query '[role=main] ${t}'. Check your theme or template.`)}const n=r.querySelector('[role="main"]');return n?n.textContent:(console.warn("Content block not found. Sphinx search tries to obtain it via DOM query '[role=main]'. Check your theme or template."),"")},init:()=>{const e=new URLSearchParams(window.location.search).get("q");document.querySelectorAll('input[name="q"]').forEach((t=>t.value=e)),e&&Search.performSearch(e)},loadIndex:e=>document.body.appendChild(document.createElement("script")).src=e,setIndex:e=>{if(Search._index=e,null!==Search._queued_query){const e=Search._queued_query;Search._queued_query=null,Search.query(e)}},hasIndex:()=>null!==Search._index,deferQuery:e=>Search._queued_query=e,stopPulse:()=>Search._pulse_status=-1,startPulse:()=>{if(Search._pulse_status>=0)return;const e=()=>{Search._pulse_status=(Search._pulse_status+1)%4,Search.dots.innerText=".".repeat(Search._pulse_status),Search._pulse_status>=0&&window.setTimeout(e,500)};e()},performSearch:e=>{const t=document.createElement("h2");t.textContent=_("Searching");const r=document.createElement("p");r.classList.add("search-summary"),r.innerText="";const n=document.createElement("ul");n.setAttribute("role","list"),n.classList.add("search");const a=document.getElementById("search-results");Search.title=a.appendChild(t),Search.dots=Search.title.appendChild(document.createElement("span")),Search.status=a.appendChild(r),Search.output=a.appendChild(n);const s=document.getElementById("search-progress");s&&(s.innerText=_("Preparing search...")),Search.startPulse(),Search.hasIndex()?Search.query(e):Search.deferQuery(e)},_parseQuery:e=>{const t=new Stemmer,r=new Set,n=new Set,a=new Set,s=new Set(splitQuery(e.toLowerCase().trim()));return splitQuery(e.trim()).forEach((e=>{const s=e.toLowerCase();if(-1!==stopwords.indexOf(s)||e.match(/^\d+$/))return;let o=t.stemWord(s);"-"===o[0]?n.add(o.substr(1)):(r.add(o),a.add(s))})),SPHINX_HIGHLIGHT_ENABLED&&localStorage.setItem("sphinx_highlight_terms",[...a].join(" ")),[e,r,n,a,s]},_performSearch:(e,t,r,n,a)=>{const s=Search._index.filenames,o=Search._index.docnames,c=Search._index.titles,i=Search._index.alltitles,h=Search._index.indexentries,l=[],u=[];_removeChildren(document.getElementById("search-progress"));const d=e.toLowerCase().trim();for(const[e,t]of Object.entries(i))if(e.toLowerCase().trim().includes(d)&&d.length>=e.length/2)for(const[r,n]of t){const t=Math.round(Scorer.title*d.length/e.length),a=c[r]===e?1:0;l.push([o[r],c[r]!==e?`${c[r]} > ${e}`:e,null!==n?"#"+n:"",null,t+a,s[r],SearchResultKind.title])}for(const[e,t]of Object.entries(h))if(e.includes(d)&&d.length>=e.length/2)for(const[r,n,a]of t){const t=Math.round(100*d.length/e.length),i=[o[r],c[r],n?"#"+n:"",null,t,s[r],SearchResultKind.index];a?l.push(i):u.push(i)}a.forEach((e=>l.push(...Search.performObjectSearch(e,a)))),l.push(...Search.performTermsSearch(t,r)),Scorer.score&&(l.forEach((e=>e[4]=Scorer.score(e))),u.forEach((e=>e[4]=Scorer.score(e)))),l.sort(_orderResultsByScoreThenName),u.sort(_orderResultsByScoreThenName);let m=[...u,...l],S=new Set;return m=m.reverse().reduce(((e,t)=>{let r=t.slice(0,4).concat([t[5]]).map((e=>String(e))).join(",");return S.has(r)||(e.push(t),S.add(r)),e}),[]),m.reverse()},query:e=>{const[t,r,n,a,s]=Search._parseQuery(e),o=Search._performSearch(t,r,n,a,s);_displayNextItem(o,o.length,r,a)},performObjectSearch:(e,t)=>{const r=Search._index.filenames,n=Search._index.docnames,a=Search._index.objects,s=Search._index.objnames,o=Search._index.titles,c=[];return Object.keys(a).forEach((i=>a[i].forEach((a=>((a,i)=>{const h=i[4],l=(a?a+".":"")+h,u=l.toLowerCase();if(u.indexOf(e)<0)return;let d=0;const m=u.split(".");u===e||m.slice(-1)[0]===e?d+=Scorer.objNameMatch:m.slice(-1)[0].indexOf(e)>-1&&(d+=Scorer.objPartialMatch);const S=s[i[1]][2],p=o[i[0]],f=new Set(t);if(f.delete(e),f.size>0){const e=`${a} ${h} ${S} ${p}`.toLowerCase();if([...f].some((t=>e.indexOf(t)<0)))return}let x=i[3];""===x?x=l:"-"===x&&(x=s[i[1]][1]+"-"+l);const g=S+_(", in ")+p;Scorer.objPrio.hasOwnProperty(i[2])?d+=Scorer.objPrio[i[2]]:d+=Scorer.objPrioDefault,c.push([n[i[0]],l,"#"+x,g,d,r[i[0]],SearchResultKind.object])})(i,a))))),c},performTermsSearch:(e,t)=>{const r=Search._index.terms,n=Search._index.titleterms,a=Search._index.filenames,s=Search._index.docnames,o=Search._index.titles,c=new Map,i=new Map;e.forEach((e=>{const t=[],a=[{files:r.hasOwnProperty(e)?r[e]:void 0,score:Scorer.term},{files:n.hasOwnProperty(e)?n[e]:void 0,score:Scorer.title}];if(e.length>2){const t=_escapeRegExp(e);r.hasOwnProperty(e)||Object.keys(r).forEach((e=>{e.match(t)&&a.push({files:r[e],score:Scorer.partialTerm})})),n.hasOwnProperty(e)||Object.keys(n).forEach((e=>{e.match(t)&&a.push({files:n[e],score:Scorer.partialTitle})}))}a.every((e=>void 0===e.files))||(a.forEach((r=>{if(void 0===r.files)return;let n=r.files;void 0===n.length&&(n=[n]),t.push(...n),n.forEach((t=>{c.has(t)||c.set(t,new Map),c.get(t).set(e,r.score)}))})),t.forEach((t=>{i.has(t)?-1===i.get(t).indexOf(e)&&i.get(t).push(e):i.set(t,[e])})))}));const h=[];for(const[l,u]of i){const i=[...e].filter((e=>e.length>2)).length;if(u.length!==e.size&&u.length!==i)continue;if([...t].some((e=>r[e]===l||n[e]===l||(r[e]||[]).includes(l)||(n[e]||[]).includes(l))))break;const d=Math.max(...u.map((e=>c.get(l).get(e))));h.push([s[l],o[l],"",null,d,a[l],SearchResultKind.text])}return h},makeSearchSummary:(e,t,r)=>{const n=Search.htmlToText(e,r);if(""===n)return null;const a=n.toLowerCase(),s=[...t].map((e=>a.indexOf(e.toLowerCase()))).filter((e=>e>-1)).slice(-1)[0],o=Math.max(s-120,0),c=0===o?"":"...",i=o+240<n.length?"...":"";let h=document.createElement("p");return h.classList.add("context"),h.textContent=c+n.substr(o,240).trim()+i,h}};_ready(Search.init);